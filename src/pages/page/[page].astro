---
import { posts } from "@/scripts/collection-workaround";
import PostSummary from "@components/PostSummary.astro";
import HeaderLink from "@/components/Header/HeaderLink.astro";
import Home from "@/layouts/Home.astro";
import { SITE } from "@/consts";
export async function getStaticPaths({ paginate }) {
  const _post = posts.sort(
    (a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf()
  );
  return paginate(posts, { pageSize: SITE.postPerPage });
}
const { page } = Astro.props;
---

<Home title={page.currentPage} description={page.description}>
  <ul>
    {
      page.data.map((post) => (
        <li>
          <PostSummary
            title={post.data.title}
            description={post.data.description}
            slug={post.slug}
            pubDate={post.data.pubDate}
            heroImage={post.data.heroImage}
          />
        </li>
      ))
    }
  </ul>
  <div class="pagination">
    <div class="prev">
      {
        page.url.prev ? (
          <HeaderLink href={page.url.prev}>Previous</HeaderLink>
        ) : null
      }
    </div>
    <div class="next">
      {
        page.url.next ? (
          <HeaderLink href={page.url.next}>Next</HeaderLink>
        ) : null
      }
    </div>
  </div>
</Home>

<style>
  ul {
    list-style: none;
    margin: 0;
    padding: 0rem;
  }
</style>
